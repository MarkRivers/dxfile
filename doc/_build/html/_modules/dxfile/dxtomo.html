

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>dxfile.dxtomo &mdash; DXfile 0.0.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="DXfile 0.0.2 documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> DXfile</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../source/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/design.html">Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../source/design.html#hdf5">HDF5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/design.html#root-level-structure">Root Level Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source/definitions.html">Definition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../source/definitions.html#color-code">Color code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/definitions.html#imaging">Imaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/definitions.html#multidimensional-data">Multidimensional data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source/corereference.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../source/corereference.html#top-level-root">Top level (root)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/corereference.html#exchange">Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/corereference.html#measurement">Measurement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/corereference.html#provenance">Provenance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source/xraytomography.html">X-ray Tomography</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../source/xraytomography.html#data-structure">Data Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/xraytomography.html#scans">Scans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/xraytomography.html#groups">Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/xraytomography.html#data-processing">Data Processing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source/install.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../source/install.html#installing-from-source">Installing from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/install.html#installing-from-conda-binstar-coming-soon">Installing from Conda/Binstar (coming soon)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/install.html#updating-the-installation-coming-soon">Updating the installation (coming soon)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source/api.html">API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../source/api/dxfile.html"><code class="docutils literal"><span class="pre">dxfile</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source/demo.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../source/demo/doc.code.html">Code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source/credits.html">Credits</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../source/credits.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source/appendix.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../source/appendix.html#default-units-for-data-exchange-entries">Default units for Data Exchange entries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../source/appendix.html#geometry">Geometry</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">DXfile</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>dxfile.dxtomo</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for dxfile.dxtomo</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="c"># #########################################################################</span>
<span class="c"># Copyright (c) 2015, UChicago Argonne, LLC. All rights reserved.         #</span>
<span class="c">#                                                                         #</span>
<span class="c"># Copyright 2015. UChicago Argonne, LLC. This software was produced       #</span>
<span class="c"># under U.S. Government contract DE-AC02-06CH11357 for Argonne National   #</span>
<span class="c"># Laboratory (ANL), which is operated by UChicago Argonne, LLC for the    #</span>
<span class="c"># U.S. Department of Energy. The U.S. Government has rights to use,       #</span>
<span class="c"># reproduce, and distribute this software.  NEITHER THE GOVERNMENT NOR    #</span>
<span class="c"># UChicago Argonne, LLC MAKES ANY WARRANTY, EXPRESS OR IMPLIED, OR        #</span>
<span class="c"># ASSUMES ANY LIABILITY FOR THE USE OF THIS SOFTWARE.  If software is     #</span>
<span class="c"># modified to produce derivative works, such modified software should     #</span>
<span class="c"># be clearly marked, so as not to confuse it with the version available   #</span>
<span class="c"># from ANL.                                                               #</span>
<span class="c">#                                                                         #</span>
<span class="c"># Additionally, redistribution and use in source and binary forms, with   #</span>
<span class="c"># or without modification, are permitted provided that the following      #</span>
<span class="c"># conditions are met:                                                     #</span>
<span class="c">#                                                                         #</span>
<span class="c">#     * Redistributions of source code must retain the above copyright    #</span>
<span class="c">#       notice, this list of conditions and the following disclaimer.     #</span>
<span class="c">#                                                                         #</span>
<span class="c">#     * Redistributions in binary form must reproduce the above copyright #</span>
<span class="c">#       notice, this list of conditions and the following disclaimer in   #</span>
<span class="c">#       the documentation and/or other materials provided with the        #</span>
<span class="c">#       distribution.                                                     #</span>
<span class="c">#                                                                         #</span>
<span class="c">#     * Neither the name of UChicago Argonne, LLC, Argonne National       #</span>
<span class="c">#       Laboratory, ANL, the U.S. Government, nor the names of its        #</span>
<span class="c">#       contributors may be used to endorse or promote products derived   #</span>
<span class="c">#       from this software without specific prior written permission.     #</span>
<span class="c">#                                                                         #</span>
<span class="c"># THIS SOFTWARE IS PROVIDED BY UChicago Argonne, LLC AND CONTRIBUTORS     #</span>
<span class="c"># &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT       #</span>
<span class="c"># LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS       #</span>
<span class="c"># FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL UChicago     #</span>
<span class="c"># Argonne, LLC OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,        #</span>
<span class="c"># INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,    #</span>
<span class="c"># BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;        #</span>
<span class="c"># LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER        #</span>
<span class="c"># CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT      #</span>
<span class="c"># LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN       #</span>
<span class="c"># ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE         #</span>
<span class="c"># POSSIBILITY OF SUCH DAMAGE.                                             #</span>
<span class="c"># #########################################################################</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Subclasses the h5py module for interacting with Data Exchange files.</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">py3</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span>


<span class="n">__author__</span> <span class="o">=</span> <span class="s">&#39;David Vine&#39;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s">&#39;Copyright (c) 2015, UChicago Argonne, LLC.&#39;</span>
<span class="n">__docformat__</span> <span class="o">=</span> <span class="s">&#39;restructuredtext en&#39;</span>
<span class="n">__platform__</span> <span class="o">=</span> <span class="s">&#39;Unix&#39;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s">&#39;1.6&#39;</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;File&#39;</span><span class="p">,</span> 
           <span class="s">&#39;Entry&#39;</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">File</span><span class="p">(</span><span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Interact with Data Exchange files.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    create_top_level_group(self, group_name)</span>
<span class="sd">        Helper function for creating a top level group which will </span>
<span class="sd">        update the ``implements`` group automagically.</span>

<span class="sd">    add_entry(self, dexen_ob, overwrite=False)</span>
<span class="sd">        This method is used to parse DataExchangeEntry objects and </span>
<span class="sd">        add them to the DataExchangeFile.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">File</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]:</span> <span class="c"># New File</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="s">&#39;exchange&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_top_level_group</span><span class="p">(</span><span class="s">&#39;exchange&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># Verify this file conforms to Data Exchange guidelines</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">assert</span> <span class="s">&#39;implements&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="k">assert</span> <span class="s">&#39;exchange&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&#39;WARNING: File does not have either/both &quot;implements&quot; or &quot;exchange&quot; group&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="s">u&#39;&lt;Closed DataExchange file&gt;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># Filename has to be forced to Unicode if it comes back bytes</span>
            <span class="c"># Mode is always a &quot;native&quot; string</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>  <span class="c"># Can&#39;t decode fname</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span> <span class="s">&#39;replace&#39;</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">=</span> <span class="s">u&#39;&lt;DataExchange file &quot;</span><span class="si">%s</span><span class="s">&quot; (mode </span><span class="si">%s</span><span class="s">)&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span>
                                                 <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">py3</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">r</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf8&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">create_top_level_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a group in the file root and updates the ``implements`` </span>
<span class="sd">        group accordingly. This method should ALWAYS be used to create </span>
<span class="sd">        groups in the file root.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="n">group_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">implements</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="s">&#39;/implements&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="n">group_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">implements</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="p">[</span><span class="s">&#39;implements&#39;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s">&#39;implements&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">implements</span><span class="p">,</span> <span class="n">group_name</span><span class="p">]))</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s">&#39;implements&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">group_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dexen_ob</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to parse DataExchangeEntry objects and add </span>
<span class="sd">        them to the DataExchangeFile.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">dexen_ob</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">dexen_ob</span> <span class="o">=</span> <span class="p">[</span><span class="n">dexen_ob</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">dexen</span> <span class="ow">in</span> <span class="n">dexen_ob</span><span class="p">:</span>

            <span class="c"># Does HDF5 path exist?</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">dexen</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">path</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_top_level_group</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

            <span class="n">root</span> <span class="o">=</span> <span class="n">dexen</span><span class="o">.</span><span class="n">root</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">require_group</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">root</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="s">&#39;entry_name&#39;</span><span class="p">)]))</span>

            <span class="n">dsets</span> <span class="o">=</span> <span class="p">[</span><span class="n">ds</span> <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">dexen</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">ds</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;__&#39;</span><span class="p">)]</span>
            <span class="p">[</span><span class="n">dsets</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;entry_name&#39;</span><span class="p">,</span> <span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="s">&#39;docstring&#39;</span><span class="p">]]</span>

            <span class="k">for</span> <span class="n">ds_name</span> <span class="ow">in</span> <span class="n">dsets</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)[</span><span class="s">&#39;value&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s">&#39;dataset_opts&#39;</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">opts</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)[</span><span class="s">&#39;dataset_opts&#39;</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">opts</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="s">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">root</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="s">&#39;entry_name&#39;</span><span class="p">)])]</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="n">ds_name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)[</span><span class="s">&#39;value&#39;</span><span class="p">],</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">,</span> <span class="s">&#39;docstring&#39;</span><span class="p">,</span> <span class="s">&#39;dataset_opts&#39;</span><span class="p">]:</span>
                                <span class="k">pass</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)[</span><span class="n">key</span><span class="p">]</span>
                    <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
                        <span class="c"># Likely cause of runtime error is dataset already existing in file</span>
                        <span class="n">dataset_exists</span> <span class="o">=</span> <span class="n">ds_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">[</span><span class="s">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">root</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="s">&#39;entry_name&#39;</span><span class="p">)])]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">dataset_exists</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">overwrite</span><span class="p">:</span>
                                <span class="k">print</span><span class="p">(</span><span class="s">&#39;WARNING: Dataset {:s} already exists. This entry has been skipped.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ds_name</span><span class="p">))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="c"># The overwite flag is set so delete the existing dataset and write the new one in its place</span>
                                <span class="k">del</span> <span class="bp">self</span><span class="p">[</span><span class="s">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">root</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="s">&#39;entry_name&#39;</span><span class="p">),</span> <span class="n">ds_name</span><span class="p">])]</span>
                                <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="s">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">root</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="s">&#39;entry_name&#39;</span><span class="p">)])]</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="n">ds_name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)[</span><span class="s">&#39;value&#39;</span><span class="p">],</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>
                                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                                    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">,</span> <span class="s">&#39;docstring&#39;</span><span class="p">,</span><span class="s">&#39;dataset_opts&#39;</span><span class="p">]:</span>
                                        <span class="k">pass</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dexen</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)[</span><span class="n">key</span><span class="p">]</span>


                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span>


<div class="viewcode-block" id="Entry"><a class="viewcode-back" href="../../source/api/dxfile.html#dxfile.dxtomo.Entry">[docs]</a><span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Interact with Data Exchange files.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    _entry_definitions(self)</span>
<span class="sd">        Contains the archetypes for Data Exchange file entries.</span>

<span class="sd">    _generate_classes(self)</span>
<span class="sd">        This method is used to turn the Entry._entry_definitions into generate_classes</span>
<span class="sd">        which can be instantitated for hold data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entry_definitions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_classes</span><span class="p">()</span>


<div class="viewcode-block" id="Entry._entry_definitions"><a class="viewcode-back" href="../../source/api/dxfile.html#dxfile.dxtomo.Entry._entry_definitions">[docs]</a>    <span class="k">def</span> <span class="nf">_entry_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method contains the archetypes for Data Exchange file entries.</span>

<span class="sd">        The syntax for an entry is:</span>
<span class="sd">            *&#39;root&#39;: The HDF5 path where this entry will be created (e.g. &#39;/measurement_3/sample&#39; or &#39;/exchange/&#39;).</span>
<span class="sd">            *&#39;entry_name&#39;: The name of entry (e.g. &#39;monochromator&#39; or &#39;sample_7&#39;). It is a HDF5 Group.</span>
<span class="sd">            *&#39;docstring&#39;: Describes this type of entry. E.g for sample: &quot;The sample measured.&quot;</span>
<span class="sd">                                *This is used only for autogegnerating documentation for DataExchangeEntry.</span>
<span class="sd">                                *It does not get written to the DataExchangeFile.</span>
<span class="sd">            *&#39;ENTRY&#39;:   An entry is a dataset with attributes under the &#39;name&#39; group.</span>
<span class="sd">                        Each &#39;ENTRY&#39; must have:</span>
<span class="sd">                            * value: The dataset</span>
<span class="sd">                        Each &#39;ENTRY&#39; should have:</span>
<span class="sd">                            * units: Units for value - an attribute of the dataset</span>
<span class="sd">                            * docstring: Used for autogenerating documentation</span>
<span class="sd">                        Each &#39;ENTRY&#39; can have (i.e optional):</span>
<span class="sd">                            *&#39;dataset_opts&#39;: Options passed to the create_dataset function. E.g.:</span>
<span class="sd">                            *&#39;dataset_opts&#39;: {&#39;compression&#39;:&#39;gzip&#39;, &#39;compression_opts&#39;:4}</span>
<span class="sd">                        Where a value is ``None`` this entry will not be added to the DataExchangeFile.</span>
<span class="sd">                        &#39;ENTRY&#39; can have any other parameter and these will be treated as HDF5 dataset attributes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/exchange&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The result of the measurement.&#39;</span><span class="p">,</span>
            <span class="s">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;counts&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The result of the measurement.&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_sample</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;sample&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The sample measured.&#39;</span><span class="p">,</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Descriptive name of the sample.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;description&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Description of the sample.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;preparation_date&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Date and time the sample was prepared.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;chemical_formula&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Sample chemical formula using the CIF format.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;mass&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;kg&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Mass of the sample.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;concentration&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;kgm^-3&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Mass/volume.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;environment&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Sample environment.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;temperature&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;kelvin&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Sample temperature.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;temperature_set&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;kelvin&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Sample temperature set point.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;pressure&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;kPa&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Sample pressure.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;thickness&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Sample thickness.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Sample position in the sample changer/robot.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;comment&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;comment&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_geometry</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/sample&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;geometry&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The general position and orientation of a component&#39;</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_experiment</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/sample&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;experiment&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;This provides references to facility ids for the proposal, scheduled activity, and safety form.&#39;</span><span class="p">,</span>
            <span class="s">&#39;proposal&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Proposal reference number. For the APS this is the General User Proposal number.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;activity&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Proposal scheduler id. For the APS this is the beamline scheduler activity id.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;safety&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Safety reference document. For the APS this is the Experiment Safety Approval Form number.&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_experimenter</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/sample&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;experimenter&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Description of a single experimenter.&#39;</span><span class="p">,</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;User name.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;role&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;User role.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;affiliation&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;User affiliation.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;address&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;User address.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;phone&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;User phone number.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;User email address.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;facility_user_id&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;User badge number.&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_exchange</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;exchange&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Used for grouping the results of the measurement&#39;</span><span class="p">,</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Description of the data contained inside&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_instrument</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;instrument&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;All relevant beamline components status at the beginning of a measurement&#39;</span><span class="p">,</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Name of the instrument.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;comment&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;comment&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;source&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The light source being used&#39;</span><span class="p">,</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Name of the facility.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;datetime&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Date and time source was measured.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;beamline&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Name of the beamline.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;current&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Electron beam current (A).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;energy&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;J&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Characteristic photon energy of the source (J). For an APS bending magnet this is 30 keV or 4.807e-15 J.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;pulse_energy&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;J&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Sum of the energy of all the photons in the pulse (J).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;pulse_width&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;s&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Duration of the pulse (s).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;mode&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;top-up&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;beam_intensity_incident&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;phs^-1&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Incident beam intensity in (photons per s).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;beam_intensity_transmitted&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;phs^-1&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Transmitted beam intensity (photons per s).&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_shutter</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;shutter&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The shutter being used&#39;</span><span class="p">,</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Name of the shutter.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;&quot;OPEN&quot; or &quot;CLOSED&quot; or &quot;NORMAL&quot;&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_amplifier</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;amplifier&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Amplifier settings.&#39;</span><span class="p">,</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Name of the amplifier.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;gain&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Amplifier gain setting&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;gain_units&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Amplifier gain units&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;current&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The current recorded by the amplifier.&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_attenuator</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;attenuator&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;X-ray beam attenuator.&#39;</span><span class="p">,</span>
            <span class="s">&#39;distance&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Distance from the sample&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;thickness&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Thickness of attenuator along beam direction&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;attenuator_transmission&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The nominal amount of the beam that gets through (transmitted intensity)/(incident intensity)&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Type or composition of attenuator&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_monochromator</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;monochromator&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;X-ray beam monochromator.&#39;</span><span class="p">,</span>
            <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Multilayer type.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;energy&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;J&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Peak of the spectrum that the monochromator selects. Since units is not defined this field is in J and corresponds to 10 keV&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;energy_error&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;J&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Standard deviation of the spectrum that the monochromator selects. Since units is not defined this field is in J.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;mono_stripe&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Type of multilayer coating or crystal.&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_detector</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;detector&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;X-ray detector.&#39;</span><span class="p">,</span>
            <span class="s">&#39;manufacturer&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The detector manufacturer.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;model&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The detector model&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;serial_number&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The detector serial number.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;bit_depth&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;dimensionless&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The detector ADC bit depth.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;pixel_size_x&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Physical detector pixel size (m).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;pixel_size_y&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Physical detector pixel size (m).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;actual_pixel_size_x&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Pixel size on the sample plane (m).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;actual_pixel_size_y&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Pixel size on the sample plane (m).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;dimension_x&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;pixels&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The detector horiz. dimension.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;dimension_y&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The detector vertical dimension.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;binning_x&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;pixels&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;If the data are collected binning the detector x binning and y binning store the binning factor.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;binning_y&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;dimensionless&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;If the data are collected binning the detector x binning and y binning store the binning factor.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;operating_temperature&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;dimensionless&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The detector operating temperature (K).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;exposure_time&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;s&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The set detector exposure time (s).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;delay_time&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;s&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Detector delay time (s). This is used in combination with a mechanical shutter.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;stabilization_time&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;s&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Detector delay time (s). This is used during stop and go data collection to allow the sample to stabilize.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;frame_rate&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;fps&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The detector frame rate (fps).&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;String HDF5 path to the exchange group where the detector output data is located.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;counts_per_joule&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;counts&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Number of counts recorded per each joule of energy received by the detector&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;basis_vectors&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;fps&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;A matrix with the basis vectors of the detector data.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;corner_position&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;fps&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The x, y and z coordinates of the corner of the first data element.&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_roi</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument/detector&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;roi_1&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;region of interest (ROI) of the image actually collected, if smaller than the full CCD.&#39;</span><span class="p">,</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;ROI name&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;x1&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;pixels&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Left pixel position&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;x2&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;pixels&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Right pixel position&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;y1&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;pixels&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Top pixel position&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;y2&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;pixels&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Bottom pixel position&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument/detector&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;objective&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;microscope objective lenses used.&#39;</span><span class="p">,</span>
            <span class="s">&#39;manufacturer&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Lens manufacturer&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;model&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Lens model.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;magnification&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;dimensionless&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Lens specified magnification&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;numerical_aperture&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;dimensionless&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;The numerical aperture (N.A.) is a measure of the light-gathering characteristics of the lens.&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_scintillator</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument/detector&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;scintillator&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;microscope objective lenses used.&#39;</span><span class="p">,</span>
            <span class="s">&#39;manufacturer&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Scintillator Manufacturer.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;serial_number&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Scintillator serial number.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;dimensionless&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Scintillator name.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;scintillating_thickness&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;dimensionless&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Scintillator thickness.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;substrate_thickness&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;dimensionless&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Scintillator substrate thickness.&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_translation</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/exchange/geometry&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;translation&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;This is the description for the general spatial location of a component.&#39;</span><span class="p">,</span>
            <span class="s">&#39;distances&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;x,y,zcomponents of translation.&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_orientation</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/exchange/geometry&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;orientation&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;This is the description for the orientation of a component.&#39;</span><span class="p">,</span>
            <span class="s">&#39;distances&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;Calling the local unit vectors (x0; y0; z0) and the reference unit vectors (x; y; z)&#39;</span>
                    <span class="s">&#39;the six numbers will be [x0 . x; x0 . y; x0 . z; y0 . x; y0 . y; y0 . z] where &quot;.&quot;&quot; is the scalar dot&#39;</span>
                    <span class="s">&#39;product (cosine of the angle between the unit vectors).&#39;</span><span class="p">)</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_simulation</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/simulation&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Describes parameters used to generate simulate data.&#39;</span><span class="p">,</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;m&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Name of the simulation&#39;</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setup</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;setup&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Tomography specific tag to store motor positions that are static during data collection.&#39;</span><span class="p">,</span>
            <span class="s">&#39;sample_x&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Position of the X stage under the rotary motor.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_y&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Position of the Y stage under the rotary motor.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_z&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Position of the Z stage under the rotary motor.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_xx&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Position of the X stage on top of the rotary motor.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_zz&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Position of the Z stage on top of the rotary motor.&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_interferometer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument/setup/&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;interferometer&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Tomography specific tag to store interferometer parameters.&#39;</span><span class="p">,</span>
            <span class="s">&#39;grid_start&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Interferometer grid start.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;grid_end&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Interferometer grid end.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;number_of_grid_periods&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Interferometer number of grid periods.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;number_of_grid_steps&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Interferometer number of grid steps.&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;root&#39;</span><span class="p">:</span> <span class="s">&#39;/measurement/instrument&#39;</span><span class="p">,</span>
            <span class="s">&#39;entry_name&#39;</span><span class="p">:</span> <span class="s">&#39;acquisition&#39;</span><span class="p">,</span>
            <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Tomography specific tag to store scan parameters.&#39;</span><span class="p">,</span>
            <span class="s">&#39;start_date&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Date and time measurement starts.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;end_date&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Date and time measurement ends.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;number_of_projections&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Number of projections.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;number_of_darks&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Number of dark images.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;number_of_flats&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Number of flat/white images.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_in&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Position of the sample axis (x or y) used for taking the sample out of the beam during data collection.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_out&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Position of the sample axis (x or y) used for taking the sample out of the beam during the flat field data collection.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;rotation_start_angle&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;degree&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Position of rotation axis at the end of data collection.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;rotation_end_angle&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;degree&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Position of rotation axis at the start of the data collection.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;angular_step&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;degree&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Rotation axis angular step used during data collection.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;mode&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Scan mode: continuos or stop-go.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;comment&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;text&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;comment&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_position_x&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containing the position of the sample axis x at each projection image collection.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_position_y&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containing the position of the sample axis y at each projection image collection.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_position_z&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;mm&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containing the position of the sample axis z at each projection image collection.&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;sample_image_shift_x&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;pixels&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containing the shift of the sample axis x at each projection on the detector plane.&#39;</span>        
            <span class="p">},</span>
            <span class="s">&#39;sample_image_shift_y&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;pixels&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containing the shift of the sample axis y at each projection on the detector plane.&#39;</span>        
            <span class="p">},</span>
            <span class="s">&#39;image_theta&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;degree&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containing the rotary stage angular position read from the encoder at each image.&#39;</span>        
            <span class="p">},</span>
            <span class="s">&#39;scan_index&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containin for each image the identifier assigned by beamline controls to each individual series of images or scan.&#39;</span>        
            <span class="p">},</span>
            <span class="s">&#39;scan_date&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containin for each image the wall date/time at start of scan in iso 8601.&#39;</span>        
            <span class="p">},</span>
            <span class="s">&#39;image_date&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="s">&#39;time&#39;</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containing the date/time each image was acquired in iso 8601..&#39;</span>        
            <span class="p">},</span>
            <span class="s">&#39;time_stamp&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containin for each image the relative time since scan_date in 1e-7 seconds.&#39;</span>        
            <span class="p">},</span>
            <span class="s">&#39;image_number&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containin for each image the the image serial number as assigned by the camera. Unique for each individual scan. Always starts at 0.&#39;</span>        
            <span class="p">},</span>
            <span class="s">&#39;image_exposure_time&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containin for each image the the measured exposure time in 1e-7 seconds (0.1us)&#39;</span>        
            <span class="p">},</span>
            <span class="s">&#39;image_is_complete&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;units&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;docstring&#39;</span><span class="p">:</span> <span class="s">&#39;Vector containin for each image the boolen status of: is any pixel data missing?&#39;</span>        
            <span class="p">}</span>
        <span class="p">}</span>
</div>
<div class="viewcode-block" id="Entry._generate_classes"><a class="viewcode-back" href="../../source/api/dxfile.html#dxfile.dxtomo.Entry._generate_classes">[docs]</a>    <span class="k">def</span> <span class="nf">_generate_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to turn the Entry._entry_definitions into generate_classes</span>
<span class="sd">        which can be instantitated for hold data.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">kw</span><span class="p">])</span>

        <span class="c"># Generate a class for each entry definition</span>
        <span class="k">for</span> <span class="n">entry_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">entry_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">):</span>
                    <span class="n">entry_type</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry_name</span><span class="p">)</span>
                    <span class="n">entry_name</span> <span class="o">=</span> <span class="n">entry_name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">if</span> <span class="n">entry_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Entry</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">entry_type</span><span class="p">[</span><span class="s">&#39;__base__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Entry</span>
                        <span class="n">entry_type</span><span class="p">[</span><span class="s">&#39;__name__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry_type</span><span class="p">[</span><span class="s">&#39;entry_name&#39;</span><span class="p">]</span>
                        <span class="n">entry_type</span><span class="p">[</span><span class="s">&#39;__init__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">__init__</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">Entry</span><span class="p">,</span> <span class="n">entry_name</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">entry_type</span><span class="p">[</span><span class="s">&#39;entry_name&#39;</span><span class="p">],</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="n">entry_type</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&quot;Unable to create Entry for {:s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">entry_name</span><span class="p">))</span>
                <span class="k">raise</span>
</div></div>
<span class="n">Entry</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Argonne National Laboratory.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.0.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>